<?php

{{ builderInfo.php|raw }}

namespace {{ thisWidget.namespace }};

class {{ thisWidget.class }} extends \ADIOS\Core\Widget {
  public function init() {
    if ($this->adios->hasPermissionsForAction("{{ thisWidget.name }}")) {
{% for itemTitle, itemConfig in thisWidget.config.sidebar %}
      $this->addSidebarItem([
        "fa_icon" => "fas {% if itemConfig.faIcon %}{{ itemConfig.faIcon }}{% else %}{{ thisWidget.config.faIcon }}{% endif %}",
        "title" => "{{ itemTitle }}",
        "custom_title" => "{{ itemConfig.customTitle|raw }}",
{% if itemConfig.url %}
        "onclick" => "desktop_update('{{ itemConfig.url }}');",
{% endif %}
{% if itemConfig.sub is iterable %}
        "sub" => [
{% for subItemTitle, subItemConfig in itemConfig.sub %}
          [
            "title" => "{{ subItemTitle }}",
            "onclick" => "desktop_update('{{ subItemConfig.url }}');",
          ],
{% endfor %}
        ],
{% endif %}
      ]);
{% endfor %}
    }
  }
}
