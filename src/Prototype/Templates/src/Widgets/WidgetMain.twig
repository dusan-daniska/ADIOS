<?php

namespace ADIOS\Widgets;

class {{ thisWidget.name }} extends \ADIOS\Core\Widget {
  public function init() {
    if ($this->adios->hasPermissionsForAction("{{ thisWidget.name }}")) {
{% for sidebarItemTitle, subItems in thisWidget.config.sidebar %}
      $this->adios->config['desktop']['sidebarItems'][] = [
        "fa_icon" => "fas {{ thisWidget.config.faIcon }}",
        "title" => "{{ sidebarItemTitle }}",
{% if subItems is iterable %}
        "sub" => [
{% for subItemTitle, subItemUrl in subItems %}
          [
            "title" => "{{ subItemTitle }}",
            "onclick" => "desktop_update('{{ subItemUrl }}');",
          ],
{% endfor %}
        ],
{% else %}
        "onclick" => "desktop_update('{{ subItems }}');",
{% endif %}
      ];
{% endfor %}
    }
  }
}